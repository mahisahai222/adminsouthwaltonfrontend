import{r as t,j as e}from"./index-Cl7xnBBD.js";import{a as j}from"./index-D0jinCwN.js";import{F as N,e as z,g as $}from"./index-DGgptYJR.js";import{C as U,a as q,b as V}from"./CForm-DW9Ba5Xm.js";import{C as G,a as J,b as K,c as F,d as n,e as O,f as o,g as Q,h as W,i as X,j as Y,k as Z}from"./CTable-DkcFxU1d.js";import{a as D}from"./CButton-DIE8Mt07.js";import{C as S,a as l,b as d}from"./CRow-BQ3vXC-k.js";const ce=()=>{const[c,i]=t.useState([]),[k,w]=t.useState(!0),[C,p]=t.useState(""),[f,h]=t.useState(""),[y,u]=t.useState(""),[P,m]=t.useState(""),[x,g]=t.useState(null),[A,r]=t.useState(!1),[M,v]=t.useState(!1),[T,E]=t.useState(null),I=async()=>{try{const a=await j.get("http://localhost:5000/api/ProductManageData");i(a.data),w(!1)}catch(a){console.error("Error fetching product manage data:",a),w(!1)}};t.useEffect(()=>{I()},[]);const B=async()=>{const a=new FormData;a.append("sno",C),a.append("productname",f),a.append("description",y),a.append("price",P),x&&a.append("image",x);try{const s=await j.post("http://localhost:5000/api/ProductManageData/pname",a,{headers:{"Content-Type":"multipart/form-data"}});i([...c,s.data]),p(""),h(""),u(""),m(""),g(null),r(!1)}catch(s){console.error("Error adding product manage:",s)}},_=async a=>{try{await j.delete(`http://localhost:5000/api/ProductManageData/${a}`),i(c.filter(s=>s._id!==a))}catch(s){console.error("Error deleting product manage:",s)}},H=a=>{p(a.sno),h(a.productname),u(a.description),m(a.price),g(null),v(!0),E(a._id),r(!0)},L=async()=>{const a=new FormData;a.append("sno",C),a.append("productname",f),a.append("description",y),a.append("price",P),x&&a.append("image",x);try{const R=(await j.put(`http://localhost:5000/api/ProductManageData/${T}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data;i(c.map(b=>b._id===T?{...b,...R}:b)),p(""),h(""),u(""),m(""),g(null),v(!1),E(null),r(!1),window.alert("Product successfully updated")}catch(s){console.error("Error updating product manage:",s)}};return k?e.jsx("div",{children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(U,{children:[e.jsxs(G,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"chocolate"},children:"Product Manage List"}),e.jsx(D,{color:"primary",size:"sm",onClick:()=>r(!0),children:"Add Product Manage"})]}),e.jsx(q,{children:c.length===0?e.jsx("div",{children:"No product manage data found."}):e.jsxs(J,{striped:!0,children:[e.jsx(K,{children:e.jsxs(F,{children:[e.jsx(n,{scope:"col",children:"S no."}),e.jsx(n,{scope:"col",children:"Product Name"}),e.jsx(n,{scope:"col",children:"Description"}),e.jsx(n,{scope:"col",children:"Price"}),e.jsx(n,{scope:"col",children:"Image"}),e.jsx(n,{scope:"col",children:"Actions"})]})}),e.jsx(O,{children:c.map(a=>e.jsxs(F,{children:[e.jsx(o,{children:a.sno}),e.jsx(o,{children:a.productname}),e.jsx(o,{children:a.description}),e.jsx(o,{children:a.price}),e.jsx(o,{children:a.image&&e.jsx("img",{src:`http://localhost:5000/uploads/${a.image}`,alt:a.productname,style:{width:"100px"}})}),e.jsxs(o,{children:[e.jsx(N,{icon:z,style:{color:"#b3ae0f",cursor:"pointer",marginRight:"10px"},onClick:()=>H(a)}),e.jsx(N,{icon:$,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>_(a._id)})]})]},a._id))})]})})]}),e.jsxs(Q,{size:"lg",visible:A,onClose:()=>r(!1),children:[e.jsx(W,{closeButton:!0,children:e.jsx(X,{children:M?"Edit Product Manage":"Add Product Manage"})}),e.jsx(Y,{children:e.jsxs(V,{children:[e.jsxs(S,{className:"mb-3",children:[e.jsx(l,{children:e.jsx(d,{type:"text",value:C,onChange:a=>p(a.target.value),placeholder:"S No."})}),e.jsx(l,{children:e.jsx(d,{type:"text",value:f,onChange:a=>h(a.target.value),placeholder:"Product Name"})})]}),e.jsxs(S,{className:"mb-3",children:[e.jsx(l,{children:e.jsx(d,{type:"text",value:y,onChange:a=>u(a.target.value),placeholder:"Description"})}),e.jsx(l,{children:e.jsx(d,{type:"text",value:P,onChange:a=>m(a.target.value),placeholder:"Price"})})]}),e.jsx(S,{className:"mb-3",children:e.jsx(l,{children:e.jsx(d,{type:"file",onChange:a=>g(a.target.files[0])})})})]})}),e.jsxs(Z,{children:[e.jsx(D,{color:"primary",onClick:M?L:B,children:M?"Update":"Add"})," ",e.jsx(D,{color:"secondary",onClick:()=>r(!1),children:"Cancel"})]})]})]})};export{ce as default};
