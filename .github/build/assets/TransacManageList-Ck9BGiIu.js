import{r as d,j as a}from"./index-Cl7xnBBD.js";import{a as j}from"./index-D0jinCwN.js";import{F as k,g as S}from"./index-DGgptYJR.js";import{C as N,b as f,a as A}from"./CForm-DW9Ba5Xm.js";import{C as B,a as F,b as E,c as T,d as t,e as L,f as c,g as P,h as H,i as I,j as R,k as _}from"./CTable-DkcFxU1d.js";import{b as r,C as x,a as l}from"./CRow-BQ3vXC-k.js";import{a as m}from"./CButton-DIE8Mt07.js";const O=()=>{const[i,p]=d.useState([]),[b,u]=d.useState(!0),[y,h]=d.useState(!1),[n,g]=d.useState({sno:"",productname:"",password:"",bookingdate:"",transactionamount:"",transactiondate:"",transactionstatus:""}),[C,w]=d.useState("");d.useEffect(()=>{(async()=>{try{const s=await j.get("http://3.111.163.2:8132/api/TransacManageData/");p(s.data),u(!1)}catch(s){console.error("Error fetching transac manage data:",s),u(!1)}})()},[]);const o=e=>{g({...n,[e.target.name]:e.target.value})},D=async()=>{try{const e=await j.post("http://3.111.163.2:8132/api/TransacManageData/password",n);p([...i,e.data]),g({sno:"",productname:"",password:"",bookingdate:"",transactionamount:"",transactiondate:"",transactionstatus:""}),h(!1)}catch(e){console.error("Error adding transac manage:",e)}},M=async e=>{try{await j.delete(`http://3.111.163.2:8132/api/TransacManageData/${e}`),p(i.filter(s=>s._id!==e))}catch(s){console.error("Error deleting transac manage:",s)}};if(b)return a.jsx("div",{children:"Loading..."});if(i.length===0)return a.jsx("div",{children:"No transac manage data found."});const v=i.filter(e=>{const s=e.password;return s&&typeof s=="string"&&s.toLowerCase().includes(C.toLowerCase())});return a.jsxs(a.Fragment,{children:[a.jsxs(N,{children:[a.jsxs(B,{className:"d-flex justify-content-between",children:[a.jsx("div",{className:"w-25",children:a.jsx(f,{children:a.jsx(r,{type:"text",placeholder:"Search by Password",value:C,onChange:e=>w(e.target.value)})})}),a.jsx(m,{color:"primary",onClick:()=>h(!0),children:"Add Transaction"})]}),a.jsx(A,{children:a.jsxs(F,{striped:!0,children:[a.jsx(E,{children:a.jsxs(T,{children:[a.jsx(t,{scope:"col",children:"S no."}),a.jsx(t,{scope:"col",children:"Product Name"}),a.jsx(t,{scope:"col",children:"Password"}),a.jsx(t,{scope:"col",children:"Booking Date"}),a.jsx(t,{scope:"col",children:"Transaction Amount"}),a.jsx(t,{scope:"col",children:"Transaction Date"}),a.jsx(t,{scope:"col",children:"Transaction Status"}),a.jsx(t,{scope:"col",children:"Actions"})]})}),a.jsx(L,{children:v.map((e,s)=>a.jsxs(T,{children:[a.jsx(t,{scope:"row",children:s+1}),a.jsx(c,{children:e.productname}),a.jsx(c,{children:e.password}),a.jsx(c,{children:e.bookingdate}),a.jsx(c,{children:e.transactionamount}),a.jsx(c,{children:e.transactiondate}),a.jsx(c,{children:e.transactionstatus}),a.jsx(c,{children:a.jsx(k,{icon:S,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>M(e._id)})})]},e._id))})]})})]}),a.jsxs(P,{visible:y,onClose:()=>h(!1),children:[a.jsx(H,{closeButton:!0,children:a.jsx(I,{children:"Add Transaction"})}),a.jsx(R,{children:a.jsxs(f,{children:[a.jsxs(x,{className:"mb-3",children:[a.jsx(l,{children:a.jsx(r,{type:"text",name:"sno",value:n.sno,onChange:o,placeholder:"S no."})}),a.jsx(l,{children:a.jsx(r,{type:"text",name:"productname",value:n.productname,onChange:o,placeholder:"Product Name"})}),a.jsx(l,{children:a.jsx(r,{type:"text",name:"password",value:n.password,onChange:o,placeholder:"Password"})})]}),a.jsx(x,{className:"mb-3",children:a.jsx(l,{children:a.jsx(r,{type:"date",name:"bookingdate",value:n.bookingdate,onChange:o,placeholder:"Booking Date"})})}),a.jsxs(x,{className:"mb-3",children:[a.jsx(l,{children:a.jsx(r,{type:"text",name:"transactionamount",value:n.transactionamount,onChange:o,placeholder:"Transaction Amount"})}),a.jsx(l,{children:a.jsx(r,{type:"date",name:"transactiondate",value:n.transactiondate,onChange:o,placeholder:"Transaction Date"})})]}),a.jsx(x,{className:"mb-3",children:a.jsx(l,{children:a.jsx(r,{type:"text",name:"transactionstatus",value:n.transactionstatus,onChange:o,placeholder:"Transaction Status"})})})]})}),a.jsxs(_,{children:[a.jsx(m,{color:"primary",onClick:D,children:"Add Transaction"})," ",a.jsx(m,{color:"secondary",onClick:()=>h(!1),children:"Cancel"})]})]})]})};export{O as default};
