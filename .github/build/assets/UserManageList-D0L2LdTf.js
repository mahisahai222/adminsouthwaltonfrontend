import{r as s,j as e}from"./index-Cl7xnBBD.js";import{a as c}from"./index-D0jinCwN.js";import{F as N,e as F,g as B}from"./index-DGgptYJR.js";import{C as H,a as I,b as P}from"./CForm-DW9Ba5Xm.js";import{C as R,a as _,b as L,c as S,d as h,e as z,f as m,g as $,h as q,i as V,j as G,k as J}from"./CTable-DkcFxU1d.js";import{a as y}from"./CButton-DIE8Mt07.js";import{C as K}from"./CCardText-Ct5r3JJA.js";import{C as w,a as x,b as M}from"./CRow-BQ3vXC-k.js";const se=()=>{const[l,o]=s.useState([]),[T,U]=s.useState(!0),[p,n]=s.useState(""),[g,d]=s.useState(""),[j,i]=s.useState(""),[b,t]=s.useState(!1),[u,C]=s.useState(!1),[E,f]=s.useState(null),D=async()=>{try{const a=await c.get("http://localhost:5000/api/userManageData/");o(a.data),console.log("HI"),U(!1)}catch(a){console.error("Error fetching user manage data:",a),U(!1)}};s.useEffect(()=>{D()},[]);const A=async()=>{if(u)try{const a=await c.put(`http://localhost:5000/api/userManageData/${E}`,{name:p,email:g,password:j});o(l.map(r=>r._id===E?a.data:r)),window.alert("User Manage successfully updated")}catch(a){console.error("Error updating user manage:",a)}else try{const a=await c.post("http://localhost:5000/api/userManageData/Username",{name:p,email:g,password:j});o([...l,a.data]),window.alert("User Manage successfully added")}catch(a){console.error("Error adding user manage:",a)}n(""),d(""),i(""),t(!1),C(!1),f(null)},v=async a=>{try{await c.delete(`http://localhost:5000/api/userManageData/${a}`),o(l.filter(r=>r._id!==a)),window.alert("User Manage successfully deleted")}catch(r){console.error("Error deleting user manage:",r)}},k=a=>{n(a.Name),d(a.email),i(a.password),f(a._id),C(!0),t(!0)};return T?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(H,{className:"d-flex 100%",children:[e.jsxs(R,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"tomato"},children:"User Manage List"}),e.jsx(y,{color:"primary",size:"sm",className:"me-md-2",onClick:()=>{t(!b),C(!1),f(null),n(""),d(""),i("")},children:"ADD USERS"})]}),e.jsx(I,{children:e.jsx(K,{children:l.length===0?e.jsx("div",{className:"no-data",children:"No user manage data found."}):e.jsx(w,{children:e.jsx(x,{children:e.jsxs(_,{striped:!0,children:[e.jsx(L,{children:e.jsxs(S,{children:[e.jsx(h,{scope:"col",children:"Name"}),e.jsx(h,{scope:"col",children:"Email"}),e.jsx(h,{scope:"col",children:"Password"}),e.jsx(h,{scope:"col",children:"Actions"})]})}),e.jsx(z,{children:l.map((a,r)=>e.jsxs(S,{children:[e.jsx(m,{children:a.Name}),e.jsx(m,{children:a.email}),e.jsx(m,{children:a.password}),e.jsxs(m,{children:[e.jsx(N,{icon:F,style:{color:"#aaad10",cursor:"pointer",marginRight:"10px"},onClick:()=>k(a)}),e.jsx(N,{icon:B,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>v(a._id)})]})]},a._id))})]})})})})})]}),e.jsxs($,{size:"lg",visible:b,onClose:()=>t(!1),"aria-labelledby":"AddUsersModalTitle",children:[e.jsx(q,{closeButton:!0,children:e.jsx(V,{id:"AddUsersModalTitle",children:u?"Edit User":"Add User"})}),e.jsx(G,{children:e.jsxs(P,{children:[e.jsxs(w,{children:[e.jsx(x,{xs:"6",children:e.jsx(M,{type:"text",id:"name",label:"Name",placeholder:"Name",value:p,onChange:a=>n(a.target.value)})}),e.jsx(x,{xs:"6",children:e.jsx(M,{type:"email",id:"email",label:"Email Address",placeholder:"Email Address",value:g,onChange:a=>d(a.target.value)})})]}),e.jsx(w,{children:e.jsx(x,{xs:"6",children:e.jsx(M,{type:"password",id:"password",label:"Password",placeholder:"Password",value:j,onChange:a=>i(a.target.value)})})})]})}),e.jsxs(J,{children:[e.jsx(y,{color:"secondary",onClick:()=>t(!1),children:"Close"}),e.jsx(y,{color:"primary",onClick:A,children:u?"Update User":"Add User"})]})]})]})};export{se as default};
