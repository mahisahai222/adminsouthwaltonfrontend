import{r as s,j as e}from"./index-Cl7xnBBD.js";import{a as j}from"./index-D0jinCwN.js";import{F as $,e as Y,g as Z}from"./index-DGgptYJR.js";import{C as ee,a as ae,b as se}from"./CForm-DW9Ba5Xm.js";import{C as te,a as le,b as ce,c as U,d as l,e as ne,f as n,g as re,h as oe,i as ie,j as de,k as he}from"./CTable-DkcFxU1d.js";import{a as _}from"./CButton-DIE8Mt07.js";import{C as pe}from"./CCardText-Ct5r3JJA.js";import{C as i,a as c,c as r,b as o}from"./CRow-BQ3vXC-k.js";const ve=()=>{const[h,m]=s.useState([]),[q,H]=s.useState(!0),[g,C]=s.useState(""),[f,V]=s.useState(""),[v,b]=s.useState(""),[y,S]=s.useState(""),[N,M]=s.useState(""),[F,w]=s.useState(""),[E,D]=s.useState(""),[T,I]=s.useState(""),[k,A]=s.useState(""),[p,B]=s.useState(!1),[P,R]=s.useState(null),[x,z]=s.useState(null),[G,d]=s.useState(!1),J=async()=>{try{const a=await j.get("http://3.111.163.2:8132/api/VehicleManageData");m(a.data),H(!1)}catch(a){console.error("Error fetching vehicle manage data:",a),H(!1)}};s.useEffect(()=>{J()},[]);const K=async()=>{const a=new FormData;a.append("sno",g),a.append("vname",f),a.append("vcolor",v),a.append("vnumber",y),a.append("vseats",N),a.append("vprice",F),a.append("contact",E),a.append("email",T),a.append("suitcase",k),x&&a.append("image",x);try{const t=await j.post("http://3.111.163.2:8132/api/VehicleManageData",a,{headers:{"Content-Type":"multipart/form-data"}});m([...h,t.data]),u(),d(!1),window.alert("Vehicle successfully added")}catch(t){console.error("Error adding vehicle:",t)}},O=a=>{C(a.sno),V(a.vname),b(a.vcolor),S(a.vnumber),M(a.vseats),w(a.vprice),D(a.contact),I(a.email),A(a.suitcase),B(!0),R(a._id),d(!0)},Q=async()=>{const a=new FormData;a.append("sno",g),a.append("vname",f),a.append("vcolor",v),a.append("vnumber",y),a.append("vseats",N),a.append("vprice",F),a.append("contact",E),a.append("email",T),a.append("suitcase",k),x&&a.append("image",x);try{const X=(await j.put(`http://3.111.163.2:8132/api/VehicleManageData/${P}`,a,{headers:{"Content-Type":"multipart/form-data"}})).data;m(h.map(L=>L._id===P?{...L,...X}:L)),u(),B(!1),R(null),d(!1),window.alert("Vehicle successfully updated")}catch(t){console.error("Error updating vehicle manage:",t)}},W=async a=>{try{await j.delete(`http://3.111.163.2:8132/api/VehicleManageData/${a}`),m(h.filter(t=>t._id!==a)),window.alert("Vehicle successfully deleted")}catch(t){console.error("Error deleting vehicle manage:",t)}},u=()=>{C(""),V(""),b(""),S(""),M(""),w(""),D(""),I(""),A(""),z(null)};return q?e.jsx("div",{className:"loading",children:"Loading..."}):e.jsxs(e.Fragment,{children:[e.jsxs(ee,{className:"d-flex 100%",children:[e.jsxs(te,{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h1",{style:{fontSize:"24px",color:"purple"},children:"Vehicle Manage List"}),e.jsx(_,{color:"primary",size:"sm",className:"me-md-2",onClick:()=>{u(),B(!1),d(!0)},children:p?"Edit Vehicle":"Add Vehicle"})]}),e.jsx(ae,{children:e.jsx(pe,{children:h.length===0?e.jsx("div",{className:"no-data",children:"No vehicle manage data found."}):e.jsx(i,{children:e.jsx(c,{children:e.jsxs(le,{striped:!0,children:[e.jsx(ce,{children:e.jsxs(U,{children:[e.jsx(l,{scope:"col",children:"S No."}),e.jsx(l,{scope:"col",children:"Vehicle Name"}),e.jsx(l,{scope:"col",children:"Vehicle Color"}),e.jsx(l,{scope:"col",children:"Vehicle Number"}),e.jsx(l,{scope:"col",children:"Vehicle Seats"}),e.jsx(l,{scope:"col",children:"Vehicle Price"}),e.jsx(l,{scope:"col",children:"Contact"}),e.jsx(l,{scope:"col",children:"Email"}),e.jsx(l,{scope:"col",children:"Suitcase"}),e.jsx(l,{scope:"col",children:"Image"}),e.jsx(l,{scope:"col",children:"Actions"})]})}),e.jsx(ne,{children:h.map((a,t)=>e.jsxs(U,{children:[e.jsx(l,{scope:"row",children:t+1}),e.jsx(n,{children:a.vname}),e.jsx(n,{children:a.vcolor}),e.jsx(n,{children:a.vnumber}),e.jsx(n,{children:a.vseats}),e.jsx(n,{children:a.vprice}),e.jsx(n,{children:a.contact}),e.jsx(n,{children:a.email}),e.jsx(n,{children:a.suitcase}),e.jsx(n,{children:a.image&&e.jsx("img",{src:`http://3.111.163.2:8132/uploads/${a.image}`,alt:a.vname,style:{width:"100px"}})}),e.jsxs(n,{children:[e.jsx($,{icon:Y,style:{color:"#b3ae0f",cursor:"pointer",marginRight:"10px"},onClick:()=>O(a)}),e.jsx($,{icon:Z,style:{color:"#bb1616",cursor:"pointer"},onClick:()=>W(a._id)})]})]},a._id))})]})})})})})]}),e.jsxs(re,{visible:G,onClose:()=>d(!1),children:[e.jsx(oe,{onClose:()=>d(!1),children:e.jsx(ie,{children:p?"Edit Vehicle":"Add Vehicle"})}),e.jsx(de,{children:e.jsxs(se,{children:[e.jsxs(i,{className:"mb-3",children:[e.jsxs(c,{children:[e.jsx(r,{htmlFor:"sno",children:"S No."}),e.jsx(o,{type:"text",id:"sno",value:g,onChange:a=>C(a.target.value),placeholder:"S No.",disabled:p})]}),e.jsxs(c,{children:[e.jsx(r,{htmlFor:"vname",children:"Vehicle Name"}),e.jsx(o,{type:"text",id:"vname",value:f,onChange:a=>V(a.target.value),placeholder:"Vehicle Name"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(c,{children:[e.jsx(r,{htmlFor:"vcolor",children:"Vehicle Color"}),e.jsx(o,{type:"text",id:"vcolor",value:v,onChange:a=>b(a.target.value),placeholder:"Vehicle Color"})]}),e.jsxs(c,{children:[e.jsx(r,{htmlFor:"vnumber",children:"Vehicle Number"}),e.jsx(o,{type:"text",id:"vnumber",value:y,onChange:a=>S(a.target.value),placeholder:"Vehicle Number"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(c,{children:[e.jsx(r,{htmlFor:"vseats",children:"Vehicle Seats"}),e.jsx(o,{type:"text",id:"vseats",value:N,onChange:a=>M(a.target.value),placeholder:"Vehicle Seats"})]}),e.jsxs(c,{children:[e.jsx(r,{htmlFor:"vprice",children:"Vehicle Price"}),e.jsx(o,{type:"text",id:"vprice",value:F,onChange:a=>w(a.target.value),placeholder:"Vehicle Price"})]})]}),e.jsxs(i,{className:"mb-3",children:[e.jsxs(c,{children:[e.jsx(r,{htmlFor:"contact",children:"Contact"}),e.jsx(o,{type:"text",id:"contact",value:E,onChange:a=>D(a.target.value),placeholder:"Contact"})]}),e.jsxs(c,{children:[e.jsx(r,{htmlFor:"email",children:"Email"}),e.jsx(o,{type:"email",id:"email",value:T,onChange:a=>I(a.target.value),placeholder:"Email"})]})]}),e.jsx(i,{className:"mb-3",children:e.jsxs(c,{children:[e.jsx(r,{htmlFor:"suitcase",children:"Suitcase"}),e.jsx(o,{type:"text",id:"suitcase",value:k,onChange:a=>A(a.target.value),placeholder:"Suitcase"})]})}),e.jsx(i,{className:"mb-3",children:e.jsxs(c,{children:[e.jsx(r,{htmlFor:"image",children:"Image"}),e.jsx(o,{type:"file",id:"image",onChange:a=>z(a.target.files[0])})]})}),e.jsx(i,{className:"mb-3",children:e.jsx(c,{children:e.jsx("div",{className:"text-info",children:"Image size should not exceed 5 MB."})})})]})}),e.jsxs(he,{children:[e.jsx(_,{color:"secondary",onClick:()=>{u(),d(!1)},children:"Close"}),e.jsx(_,{color:"primary",onClick:p?Q:K,children:p?"Update Vehicle":"Add Vehicle"})]})]})]})};export{ve as default};
